<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="../../lib/modulos-style.css">
</head>
<body>

<script src="../../lib/feynman-logic.js"></script>

<script>
    // Esta función solo existe en este archivo porque es única para este módulo.
    function setupFrankStarlingSimulator() {
        const slider = document.getElementById('preload-slider');
        const valueDisplay = document.getElementById('preload-value');
        const canvas = document.getElementById('contractionChart');
        if (!slider || !valueDisplay || !canvas) { return; }

        const ctx = canvas.getContext('2d');
        let chart;

        function createOrUpdateChart(preload) {
            const force = -0.01 * Math.pow(preload - 90, 2) + 100;
            const data = { /* ... datos del gráfico ... */ };
            if (chart) {
                chart.data.datasets[0].data[0] = Math.max(0, force);
                chart.update();
            } else {
                chart = new Chart(ctx, { /* ... configuración del gráfico ... */ });
            }
        }
        slider.addEventListener('input', function() {
            valueDisplay.textContent = this.value;
            createOrUpdateChart(parseInt(this.value));
        });
        createOrUpdateChart(parseInt(slider.value));
    }

    // Nos aseguramos de ejecutar esta función específica cuando la página cargue.
    document.addEventListener('DOMContentLoaded', setupFrankStarlingSimulator);
</script>

</body>
</html>