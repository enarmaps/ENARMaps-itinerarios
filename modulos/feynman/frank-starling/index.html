<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="stylesheet" href="../../lib/modulos-style.css">

    <style>
        :root {
            --color-secondary: #00695c; /* Teal Dark */
            --color-accent: #bf360c; /* Deep Orange */
        }
        .feynman-step {
            background-color: #fafafa;
        }
        .feynman-step h3 {
            color: var(--color-secondary);
            border-bottom-color: var(--color-secondary);
        }
        .analogy-box {
            background-color: #e0f2f1;
            border-left: 5px solid var(--color-secondary);
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
            font-style: italic;
        }
        .summary-box {
            background-color: #e8eaf6;
            border: 2px solid var(--color-primary-dark);
        }
        .summary-box h3 {
            color: var(--color-primary-dark);
        }
    </style>
</head>
<body>

<script src="../../lib/feynman-logic.js"></script>

<script>
    // Esta función solo existe en este archivo porque es única para este módulo.
    function setupFrankStarlingSimulator() {
        const slider = document.getElementById('preload-slider');
        const valueDisplay = document.getElementById('preload-value');
        const canvas = document.getElementById('contractionChart');
        if (!slider || !valueDisplay || !canvas) { return; }

        const ctx = canvas.getContext('2d');
        let chart;

        function createOrUpdateChart(preload) {
            const force = -0.01 * Math.pow(preload - 90, 2) + 100;
            const data = { /* ... datos del gráfico ... */ };
            if (chart) {
                chart.data.datasets[0].data[0] = Math.max(0, force);
                chart.update();
            } else {
                chart = new Chart(ctx, { /* ... configuración del gráfico ... */ });
            }
        }
        slider.addEventListener('input', function() {
            valueDisplay.textContent = this.value;
            createOrUpdateChart(parseInt(this.value));
        });
        createOrUpdateChart(parseInt(slider.value));
    }

    // Nos aseguramos de ejecutar esta función específica cuando la página cargue.
    document.addEventListener('DOMContentLoaded', setupFrankStarlingSimulator);
</script>

</body>
</html>