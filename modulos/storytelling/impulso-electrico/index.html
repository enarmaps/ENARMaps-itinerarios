<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Viaje del Impulso Eléctrico (Storytelling Interactivo)</title>
    
    <link rel="stylesheet" href="../../lib/modulos-style.css">
    <link rel="stylesheet" href="../../lib/storytelling-style.css">

    <style>
        .mcq-option {
            width: 100%; padding: 15px; text-align: left;
            border: 2px solid var(--color-border); border-radius: 8px;
            background-color: var(--color-paper); cursor: pointer;
            transition: all 0.2s ease; font-size: 1rem;
        }
        .mcq-option:hover:not(:disabled) {
            border-color: var(--color-primary-light); background-color: #f0f4ff;
        }
        .mcq-option.correct {
            background-color: #e8f5e9; border-color: var(--color-success);
            color: var(--color-success); font-weight: 700;
        }
        .mcq-option.incorrect {
            background-color: #ffebee; border-color: var(--color-error);
            color: var(--color-error); font-weight: 700;
        }
        .explanation { display: none; margin-top: 15px; padding: 15px; background-color: #eef2f9; border-radius: 8px; }
    </style>
</head>
<body class="layout-document">

<div class="module-header">
    <img src="/landing-page/images/logo-enarmaps.png" alt="Logo ENARMaps" class="module-logo">
    <h1 class="module-title">El Viaje del Impulso Eléctrico</h1>
    <h2 class="module-subtitle">Método Storytelling Interactivo</h2>
</div>

<div class="report-container">
    <div class="page">
        <div style="margin-bottom: 25px;">
             <a href="../../webapp/boveda.html" class="ui-button button-secondary" style="min-width: 250px; display: inline-flex; align-items: center; justify-content: center; gap: 8px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                Regresar a la Bóveda
            </a>
        </div>

        <h1>Capítulo 1: El Decreto del Rey</h1>
        <p>En el "Reino del Corazón", todo funciona gracias a un mensajero veloz y obediente: el <strong>Impulso Eléctrico</strong>. Su viaje determina cada latido. La historia de este mensajero comienza en el trono del rey.</p>
        
        <div class="story-step">
            <h3>El Trono: Nodo Sinusal (SA)</h3>
            <p>En lo alto de la aurícula derecha reside el rey, el <strong>Nodo SA</strong>. Él es el marcapasos natural del corazón. De forma automática y rítmica, lanza el decreto: "¡Contráiganse!". Este es el inicio del viaje del impulso, y en el ECG, es el nacimiento de la <strong>Onda P</strong>.</p>
            <button class="reveal-button" onclick="revealScene('scene2')">Ver el siguiente paso del viaje...</button>
        </div>

        <div id="scene2" class="story-step hidden-scene">
            <h3>La Aduana: Nodo Auriculoventricular (AV)</h3>
            <p>El impulso viaja por las aurículas, haciendo que se contraigan, y llega a una "aduana" obligatoria entre las aurículas y los ventrículos: el <strong>Nodo AV</strong>. Este guardia es muy estricto y detiene al impulso por una fracción de segundo (unos 0.12-0.20 segundos). ¿Por qué? Para dar tiempo a que los ventrículos se llenen de sangre por completo antes de contraerse. En el ECG, esta pausa es el <strong>Intervalo PR</strong>.</p>
            <button class="reveal-button" onclick="revealScene('scene3')">¿Qué sucede después de la pausa?</button>
        </div>

        <div id="scene3" class="story-step hidden-scene">
            <h3>Capítulo 2: Las Superautopistas Ventriculares</h3>
            <p>Una vez que el guardia del Nodo AV le da el paso, el impulso entra a las superautopistas de los ventrículos para entregar el mensaje de contracción de forma casi instantánea. Viaja por el <strong>Haz de His</strong>, se divide en las <strong>Ramas Derecha e Izquierda</strong>, y se distribuye por las <strong>Fibras de Purkinje</strong>. Esta rapidísima despolarización ventricular es el imponente <strong>Complejo QRS</strong> en el ECG.</p>
            <button class="reveal-button" onclick="revealScene('scene4')">Pero... ¿qué pasa si algo sale mal?</button>
        </div>

        <div id="scene4" class="story-step hidden-scene">
            <h3>Epílogo: Los Villanos del Camino (Bloqueos)</h3>
            <p>A veces, el viaje del impulso se interrumpe. Estos problemas, los "bloqueos", son un tema clave en el ENARM. Demuestra que entiendes la historia:</p>
            
            <div class="interactive-simulator" id="q1" style="margin-top:20px;">
                <h4>Pregunta ENARM: Si el "guardia de la aduana" (Nodo AV) se vuelve perezoso y retrasa a **todos** los impulsos por igual, pero sin bloquear a ninguno, ¿qué ves en el ECG?</h4>
                <div style="display:flex; flex-direction:column; gap:10px;">
                    <button class="mcq-option" data-correct="true">Bloqueo AV de 1er Grado (Intervalo PR >0.20s)</button>
                    <button class="mcq-option">Bloqueo AV de 3er Grado (Disociación AV)</button>
                    <button class="mcq-option">Bloqueo de Rama Derecha (QRS ancho)</button>
                </div>
                <div class="explanation">
                    <p><strong>Explicación: ¡Correcto!</strong> En el bloqueo de 1er grado, la "aduana" (Nodo AV) simplemente se tarda más con cada impulso, por eso el Intervalo PR se alarga de forma constante.</p>
                </div>
            </div>

            <div class="interactive-simulator" id="q2" style="margin-top:20px;">
                <h4>Pregunta ENARM: Si la "superautopista" de la Rama Derecha se cierra, ¿qué patrón esperarías ver en el ECG?</h4>
                <div style="display:flex; flex-direction:column; gap:10px;">
                    <button class="mcq-option">Intervalo PR corto</button>
                    <button class="mcq-option" data-correct="true">Un complejo QRS ancho (>0.12s) con patrón RSR' en V1</button>
                    <button class="mcq-option">Elevación del segmento ST en cara inferior</button>
                </div>
                <div class="explanation">
                    <p><strong>Explicación: ¡Correcto!</strong> Al bloquearse la rama derecha, el impulso tiene que viajar "a pie" por el músculo para despolarizar el ventrículo derecho, lo que hace el proceso más lento (QRS ancho) y genera el patrón de "orejas de conejo" (RSR') en V1.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="../../lib/storytelling-logic.js"></script>
<script>
    // Se necesita que esta función sea global para que el `onclick` del HTML la encuentre.
    function revealScene(sceneId) {
        const scene = document.getElementById(sceneId);
        if (scene) {
            scene.style.display = 'block';
            setTimeout(() => {
                scene.style.opacity = '1';
                scene.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 10);
        }
    }
    
    // El inicializador del quiz se llama desde el JS compartido `storytelling-logic.js`
</script>

</body>

</html>
